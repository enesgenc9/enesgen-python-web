using System.Collections.Generic;
using UnityEngine;

public class ObjectPooler : MonoBehaviour {
    
    // Singleton yapısı (Her yerden erişilebilsin diye)
    public static ObjectPooler Instance;
    
    public GameObject bulletPrefab; // Mermi objesi
    public int poolSize = 50; // Havuzda kaç mermi olacak?
    
    private Queue<GameObject> bulletPool;

    void Awake() {
        Instance = this;
        bulletPool = new Queue<GameObject>();

        // Havuzu doldur ve objeleri gizle
        for (int i = 0; i < poolSize; i++) {
            GameObject obj = Instantiate(bulletPrefab);
            obj.SetActive(false);
            bulletPool.Enqueue(obj);
        }
    }

    // Mermi lazım olduğunda bu fonksiyon çağrılır
    public GameObject SpawnFromPool(Vector3 position, Quaternion rotation) {
        GameObject objectToSpawn = bulletPool.Dequeue();

        objectToSpawn.SetActive(true);
        objectToSpawn.transform.position = position;
        objectToSpawn.transform.rotation = rotation;

        // İşi bitince havuza geri eklenecek (Queue mantığı)
        bulletPool.Enqueue(objectToSpawn);

        return objectToSpawn;
    }
}
